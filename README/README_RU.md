# Diploma

Данный проект содержит реализацию вычислительного алгоритма расчета равновесных форм капли магнитной жидкости, 
подверженной действию однородного магнитного поля (осесимметричный случай).

## Зависимости

Для сборки проекта используется [CMake](https://cmake.org/). Если вы работаете в IDE, поддерживающей сборку CMake проектов, 
то достаточно просто открыть файл `CMakeLists.txt`, лежаший в корне проекта, в данной IDE. Иначе можете воспользоваться полезным 
[руководством](https://preshing.com/20170511/how-to-build-a-cmake-based-project/) по сборке CMake проектов различными способами.

Для создания графиков используется [Gnuplot](http://www.gnuplot.info/). Поэтому для полноценной работы проекта Gnuplot должен быть 
установлен и доступен из командной строки.

## Доступные опции запуска

Параметр `W` определяет соответствие между магнитными и капиллярными силами.

Параметр `χ` определяет магнитную восприимчивость жидкости.

Значения опций всех типов, за исключением `bool`, записываются через `=` без пробелов `--example=1`. Значения типа `string` должны за быть 
обернуты одинарными ковычками `'example'`.

При запуске программы доступны следующие опции:

| Опция                             | Описание                                                                                              | Тип    | По умолчанию  |
| :-------------------------------- | :---------------------------------------------------------------------------------------------------- | :----: | :-----------: |
| --window-width                    | Ширина окна Gnuplot с графиком                                                                        | int    | 1280          |
| --window-height                   | Высота окна Gnuplot с графиком                                                                        | int    | 720           |
| --w-param-target                  | Целевое значение параметра `W`                                                                        | float  | 0.0           |
| --chi-param-initial               | Начальное значение параметра `χ`                                                                      | float  | 1.0           |
| --chi-param-target                | Целевое значение параметра `χ`                                                                        | float  | 1.0           |
| --relaxation-param-initial        | Начальное значение параметра релаксации при расчете поверхности жидкости                              | float  | 1.0           |
| --relaxation-param-min            | Минимальное значение параметра релаксации при расчете поверхности жидкости                            | float  | 0.1           |
| --accuracy                        | Точность аппроксимации при расчете поверхности жидкости                                               | float  | 0.1           |
| --splits-num                      | Количество разбиений поверхности жидкости при ее расчете                                              | int    | 100           |
| --iterations-max-num              | Максимальное количество итерации при расчете поверхности жидкости                                     | int    | 1000          |
| --w-results-num                   | Количество раcчетов от начального (0.0) до целевого значения `W`                                      | int    | 1             |
| --chi-result-num                  | Количество расчетов от начального до целевого значения `χ`                                            | int    | 1             |
| --field-surf-splits-num           | Количество разбиений магнитного поля на поверхности жидкости при расчете его потенциала               | int    | 10            |
| --field-int-splits-num            | Количество разбиений магнитного поля внутри жидкости при расчете его потенциала                       | int    | 5             |
| --field-ext-splits-num            | Количество разбиений магнитного поля снаружи жидкости при расчете его потенциала                      | int    | 5             |
| --field-iter-max-num              | Максимальное количество итерации при расчете потенциала магнитного поля                               | int    | 1000          |
| --field-accuracy                  | Точность аппроксимации при расчете потенциала магнитного поля                                         | float  | 0.1           |
| --field-relax-param-initial       | Начальное значение параметра релаксации при расчете потенциала магнитного поля                        | float  | 1.0           |
| --field-relax-param-min           | Минимальное значение параметра релаксации при расчете потенциала магнитного поля                      | float  | 0.1           |
| --field-model-relax-param-initial | Начальное значение параметра релаксации при расчете модельной задачи для потенциала магнитного поля   | float  | 1.0           |
| --field-model-relax-param-min     | Минимальное значение параметра релаксации при расчете модельной задачи для потенциала магнитного поля | float  | 0.1           |
| --field-model-chi                 | Значение `χ` при расчете модельной задачи для потенциала магнитного поля                              | float  | 1.0           |
| --field-inf-pos-multiplier        | Множитель значений поверхности жидкости для получения внешней границы магнитного поля                 | float  | 4.0           
| --label-x                         | Название оси `x`                                                                                      | string | 'x'           |
| --label-y                         | Название оси `y`                                                                                      | string | 'y'           |
| --label-potential                 | Название оси потенциала магнитного поля                                                               | string | 'potential'   |
| --label-error                     | Название оси невязки потенциала магнитного поля                                                       | string | 'error'       |
| --equal-axis                      | Включает одинаковый мастаб осей на графиках                                                           | bool   | false         |
| --dimensionless                   | Включает обезразмеривание результатов по объему                                                       | bool   | false         |
| --pedantic-right-sweep            | Включает прерывание расчетов, если трёхдиагональная система не соответствует условиям правой прогонки | bool   | false         |
| --main-problem                    | Включает расчет основной задачи                                                                       | bool   | false         |
| --field-model-problem             | Включает расчет модельной задачи для потенциала магнитного поля                                       | bool   | false         |
| --plot-fluid                      | Включает создание графиков поверхности жидкости                                                       | bool   | false         |
| --plot-field                      | Включает создание графиков потенциала магнитного поля                                                 | bool   | false         |
| --plot-field-isolines             | Включает создание графиков изолиний потенциала магнитного поля                                        | bool   | false         |
| --plot-field-error                | Включает создание графиков невязки потенциала магнитного поля при расчете модельной задачи            | bool   | false         |
| --plot-field-grid                 | Включает создание графиков вычислительной сетки для расчета потенциала магнитного поля                | bool   | false         |
| --plot-height-coefs               | Включает создание графика соотношения высоты капли жидкости к ее ширине                               | bool   | false         |

## Примеры визуализации результатов

Динамика поверхности жидкости:
![alt-text](/README/plots/plot-fluid-surface.png)

Потенциал магнитного поля:
![alt-text](/README/plots/plot-field.png)

Изолинии потенциала магнитного поля:
![alt-text](/README/plots/plot-field-isolines.png)

Вычислительная сетка для расчетов потенциала магнитного поля:
![alt-text](/README/plots/plot-grid.png)

Соотношение высоты капли магнитной жидкости к ее ширине:
![alt-text](/README/plots/plot-height-coefs.png)

Невязка потенциала магнитного поля при расчете модельной задачи:
![alt-text](/README/plots/plot-field-error.png)
